<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
        li {
            height: 36px;
        }
    </style>
</head>

<body>
    <div id="app">
        <p>{{ count }}</p>
        <ul>
            <li v-for="item in 1000">{{ hh }}</li>
        </ul>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.11/dist/vue.js"></script>
    <script>
        var vm = new Vue({
            el: "#app",

            data: {
                count: 1,
                timer: '',
                hh: "ğŸ˜€"
            },

            methods: {
                onScroll() {
                    console.log("æ»šåŠ¨ä¸­");
                },
            },

            // è®¾ç½®ä¸€ä¸ªè®¡æ—¶å™¨ï¼Œæ¯ä¸ªä¸€ç§’é’Ÿå°±å¯¹ count åš+1 æ“ä½œã€‚é€‰æ‹©ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°æ¥å®ç°ã€‚
            // åº”è¯¥åœ¨å“ªä¸€ä¸ªé‡Œé¢å»åšå‘¢ï¼Ÿé¦–å…ˆæ’é™¤æ‰æ›´æ–°é˜¶æ®µä¸é”€æ¯é˜¶æ®µ
            // å…¶æ¬¡åˆå§‹æŒ‚è½½é˜¶æ®µçš„4ä¸ª beforeCreate created beforeMount mounted
            // æ’é™¤ beforeCreate ã€‚å¦å¤–ä¸‰ä¸ªéƒ½okã€‚ä¸€èˆ¬é€‰æ‹© created æˆ–è€… mounted
            mounted() {
                this.timer = setInterval(() => {
                    console.log("è®¡æ—¶å™¨");
                    this.count += 1;
                }, 1000);

                // å®šä¹‰ä¸€ä¸ªå…¨å±€çš„æ»šåŠ¨æ¡æ»šåŠ¨äº‹ä»¶çš„ç›‘å¬
                window.addEventListener("scroll", this.onScroll);
            },

            beforeDestroy() {
                // æ¸…ç†è®¡æ—¶å™¨
                clearInterval(this.timer); //æ³¨æ„è¿™ä¸ªtimerä¸€å®šæ˜¯å…¨å±€ä¸‹çš„

                // æ¸…é™¤å…¨å±€æ»šåŠ¨ç›‘å¬
                window.removeEventListener("scroll", this.onScroll);
            },
        });
    </script>
</body>

</html>